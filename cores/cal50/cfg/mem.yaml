params:
  - { name: RAM_OFFSET,   value: "22'h20_0000" }
  - { name: PCM_OFFSET,   value: "(`PCM_START-`JTFRAME_BA1_START)>>1" }
clocks:
  clk48:
    - freq: 2000000
      outputs:
        - cen2
sdram:
  banks:
    - buses:
        - name: ram
          addr_width: 17   # extra bit for buf_cs
          data_width: 16
          din: cpu_dout
          offset: RAM_OFFSET
          rw: true
        - name: main
          addr_width: 20
          data_width: 16
    - buses:
        - name: snd
          addr_width: 18
          data_width: 8
        - name: pcm
          addr_width: 20
          data_width: 8
          offset: PCM_OFFSET
    - buses:
        - name: fix
          addr_width: 21
          data_width:  16
    # Bank 3 for graphics. The multiplexed access
    # would've been inside the SETA chip in the original
    # whereas I'm taking out of the core and into the
    # JTFRAME-managed logic for simplicity
    - buses:
        - name: scr
          addr_width: 21
          data_width: 32
        - name: obj
          addr_width: 21
          data_width: 32
bram:
  - name: pal
    addr_width: 10
    data_width: 16
    din: cpu_dout
    addr: main_addr[9:1]
    rw: true
    dual_port:
      name: palrd
      dout: pal_data
  # X1-012 Video RAM
  - name: tlv
    addr_width: 14
    data_width: 16
    din: cpu_dout
    addr: main_addr[13:1]
    rw: true
    # dual_port:
    #   name: tlrd
    #   dout: tlram_data
  - name: nvram
    addr_width: 12
    data_width: 16
    din: cpu_dout
    addr: main_addr[11:1]
    rw: true
  # PCM chip
  - name: pcmram
    addr_width: 13
    data_width: 8
    rw: true